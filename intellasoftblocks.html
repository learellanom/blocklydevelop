<html>

<head>
  <meta http-equiv="Expires" content="0">
  <meta http-equiv="Last-Modified" content="0">
  <meta http-equiv="Cache-Control" content="no-cache, mustrevalidate">
  <meta http-equiv="Pragma" content="no-cache">
</head>

<link   rel="stylesheet" href="styles/blocklystyle.css">

<script src="./lib/blockly.min.js"></script>

<script>
window.onload = function(e){ 
}
document.onload = function(e){
}


</script>



<style>

</style>

<body>

<div>

<label style="float: left;">Flow   : </label>
<input list="browsers" name="browser" id="browserin" style="float: left; width: 250px;">
<datalist id="browsers">
</datalist>

<ul class="menu">
  <li><a href="#"    onclick="read_flow();"        >Read<a></li>
  <li><a href=#      onclick="save_flow();"        >Save<a></li>
  <li><a href=#      onclick="reload();"           >Clear<a></li>
  <li><a href=#      onclick="download_local();"   >Download<a></li>  
  <li><a href="#"    onclick="import_flow();"      >Import</a></li>       
  <li><a href="#"    onclick="validate_flow();"    >Validate</a></li>             
</ul>

<div class="myoption">

	<select onchange="show(this);">
	  <option value="Menu" selected >Menu...</option>		
	  <option value="Validate"      >Validate</option>
	  <option value="Import"        >Import</option>
	  <option value="Download"      >Download</option>
	  <option value="Clear"         >Clear</option>
	  <option value="Save"          >Save</option>		  
	  <option value="Read"          >Read</option>		  		  
	</select>
	
<div>


</div>

<br>
<br>
	<!--
    <div style="border-style: solid; border-width : 1px; border-color : #D5D8DC ; height : 45px; padding : 4px 2px 2px;">
	  <input type="text" id="txtsearch" name="txtsearch" style="width: 135px;">
	  <a href="#"  onclick="showme(document.getElementById('txtsearch'));" ><img src="./images/search.png" style="height:20px; width:20px;" /><a>	  
	  <a href=#    onclick="cleanme();"><img src="./images/clear.png" style="height:20px; width:20px; padding : 8px 0 0px 0;" /><a>	
	</div>	
	-->
	<div id="blocklyArea" style="height: 95%; width: 100%;">
		<div id="blocklyDiv" style="position: absolute"> </div>
		<!-- <div id="blocklyDiv" style="height: 100%; width: 100%;"></div> -->
	</div>

	
</body>

<br>
<br>

<script src="intellasoftblocks.Module.js"></script>

<script>


function showme(mysearch){


	if (mysearch == "" || mysearch == null){
		return;
	}
	
	
	var mytoolbox      = demoWorkspace.getToolbox();
	var mytoolboxitems = mytoolbox.getToolboxItems();
	
	
	
	var mysearchtxt    = mysearch;
	mysearch           = mysearch.toLowerCase();
	
	
	// console.log("myserachtxt -> " + mysearchtxt);
	
	parser = new DOMParser();
	var xml1  = parser.parseFromString(mytoolbox,"text/xml");
	var xml2  = parser.parseFromString(mytoolbox3,"text/xml");
	
    var mynodes      = xml1.childNodes;
	var mynodescount = mynodes.length;
	
    //
	// 
	//

	//console.log("el xml ->" + xml1);
	//console.log("mynodes->" + mynodes);

    var theblocks1      = xml1.getElementsByTagName("block");
	var theblocks1count = theblocks1.length;
	
    //console.log("x ->:" + theblocks1[0].attributes[0].value);
	//console.log("x ->" + theblocks1);

    // var y            = xml.getElementsByTagName("category")[0];
	//
	// the category ALL
	//
    var thecategories1  = xml1.children[0].children[1];	
	

	// console.log("y->" + thecategories1.attributes[0].value);
	

	for (g of theblocks1)
	{
		// console.log("g -> " + g.attributes[0].value);
		
		myname = g.attributes[0].value;
		myname = myname.toLowerCase();

		if (myname.indexOf(mysearchtxt) !== -1){
			// console.log("g-> Encontro SI " + mysearch + " result -> " + myname.indexOf(mysearch));
			xml2.children[0].children[0].appendChild(g);							
		};		
			
			
	}

	var xmlText = new XMLSerializer().serializeToString(xml2);
	demoWorkspace.updateToolbox(xmlText);
	
}



function cleanme(){
	
	demoWorkspace.updateToolbox(mytoolbox);		
	// document.getElementById('txtsearch').value = "";
}

</script>

</html>